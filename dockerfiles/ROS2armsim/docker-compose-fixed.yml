services:
  ROSsim:
    container_name: rossim
    build:
      context: .
      dockerfile: dockerfile
      # Add build arguments for memory control
      shm_size: 2gb
    ports:
      - "3000:3000"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Australia/Perth
      - SUBFOLDER=/
      - TITLE=ROS2 Simulator
    volumes:
      - ./config:/config
    shm_size: 2gb
    # Add memory limits to prevent OOM during runtime
    mem_limit: 4g
    memswap_limit: 4g
    restart: unless-stopped
    # Optional: GPU support if available
    # devices:
    #   - /dev/dri:/dev/dri
